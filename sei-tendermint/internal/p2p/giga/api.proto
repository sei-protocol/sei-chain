syntax = "proto3"

package p2p.giga;

import "autobahn/autobahn.proto";

option go_package = "github.com/tendermint/tendermint/internal/p2p/giga/pb";

message SignedMsg {
  Msg msg = 1;
  Signature sig = 2;
}

message LaneReq {
  SignedMsg lane_proposal = 1;
}

message LaneResp {
  SignedMsg lane_vote = 1;
}

message LaneQCsResp {}

message ConsensusReq {
  oneof t {
    FullProposal proposal = 1;
    SignedMsg prepare_vote = 2;
    SignedMsg commit_vote = 3;
    FullTimeoutVote timeout_vote = 4;
    TimeoutQC timeout_qc = 5;
  }
}
message ConsensusResp {}

message PingReq {}
message PingResp {}

message LaneVote {
  SignedMsg lane_vote = 1;
}

message LaneProposal {
  SignedMsg lane_proposal = 1;
}

message AppVote {
  SignedMsg app_vote = 1;
}

message StreamLaneProposalsReq {
  uint64 first_block_number = 1;
}

message StreamAppQCsReq {}
message StreamAppQCsResp {
  AppQC app_qc = 1;
  CommitQC commit_qc = 2;
}

message StreamCommitQCsReq {}
message StreamLaneVotesReq {}
message StreamAppVotesReq {}

message GetBlockReq {
  uint64 global_number = 1;
}

message GetBlockResp {
  optional Block block = 1;
}

message StreamFullCommitQCsReq {
  uint64 next_block = 1;
}
