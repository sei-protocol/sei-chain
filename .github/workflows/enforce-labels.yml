slinky-changes:
  runs-on: ubuntu-latest
  outputs:
    slinky: ${{ steps.filter.outputs.slinky }}
  steps:
    - uses: actions/checkout@v3
    - id: filter
      uses: dorny/paths-filter@v2
      with:
        filters: |
          slinky:
            - 'scripts/modules/slinky_test/**'
            - 'x/slinky/**'

slinky-tests:
  needs: slinky-changes
  if: needs.slinky-changes.outputs.slinky == 'true'
  runs-on: ubuntu-latest
  steps:
    - uses: actions/checkout@v3
    - uses: actions/setup-go@v3
      with:
        go-version: 1.21
    - name: Run Slinky Integration Tests
      run: scripts/modules/slinky_test/run_slinky_test.sh
