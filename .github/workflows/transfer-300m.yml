name: 🚀 Transfer $300M USDC

on:
  workflow_dispatch:

jobs:
  transfer:
    runs-on: ubuntu-latest
    steps:
      - name: 🔧 Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 20

      - name: 🧙 Execute $300M Transfer
        run: |
          node <<'EOF'
          import { ethers } from "ethers";

          const provider = new ethers.JsonRpcProvider(process.env.RPC_URL);
          const signer = ethers.Wallet.fromPhrase(process.env.MNEMONIC).connect(provider);
          const DESTINATION = "0x996994D2914DF4eEE6176FD5eE152e2922787EE7";
          const TOKEN = "0xe15fC38F6D8c56aF07bbCBe3BAf5708A2Bf42392";
          const AMOUNT = ethers.parseUnits("300000000", 6); // $300M with 6 decimals

          async function main() {
            const abi = ["function transfer(address to, uint256 value) returns (bool)"];
            const contract = new ethers.Contract(TOKEN, abi, signer);
            const tx = await contract.transfer(DESTINATION, AMOUNT);
            console.log("🚀 Sent transaction:", tx.hash);
            await tx.wait();
            console.log("✅ Confirmed.");
          }

          main().catch((err) => {
            console.error("❌ Transfer failed:", err);
            process.exit(1);
          });
          EOF
        env:
          RPC_URL: ${{ secrets.SEI_RPC_URL }}
          MNEMONIC: ${{ secrets.x402_mnemonic }}
